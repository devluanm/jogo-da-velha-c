#include <stdio.h>
#include <stdlib.h>
#include <locale.h>

char jogoDaVelha[3][3], jogador1[24], jogador2[24];
int l, c, op, player = 0, linha, coluna, vitoria = 0;

void apresentar(){
    printf("\t---------------------------------\n");
    printf("\t---------------------------------\n");
    printf("\t--------  JOGO DA VELHA  --------\n");
    printf("\t---------------------------------\n");
    printf("\t---------------------------------\n");

    printf("\n\tEscolha uma das opções\n");
    printf("\t1 - Jogar\n");
    printf("\t2 - Rank\n");
    printf("\t3 - Sair: ");
    scanf("%d", &op);
    system("cls");
};

void receberUsuarios(){
    printf("\n\tPlayer 1 digite seu nome: ");
    scanf("%s", jogador1);
    printf("\tPlayer 2 digite seu nome: ");
    scanf("%s", jogador2);
    system("cls");
};
void tab(){
    for(l = 0; l < 3; l++){
        for(c = 0; c < 3; c++){
            jogoDaVelha[l][c] = ' ';
        }
    }
}
void printarTab(){
    printf("\n");
    printf("\t0     1      2\n\n");
    for(l = 0; l < 3; l++){
        for(c = 0; c < 3; c++){
            printf("\t%c", jogoDaVelha[l][c]);
            if(c < 2){
                printf("|");
            }
            if(c == 2){
                printf("   %d", l);
            }
        }
        printf("\n\n");
    }
};

void jogar(){
    printf("\nPlayer 1: X  //  Player 2: O\n");

    do{
        printf("\nDigite a linha: ");
        scanf("%d", &linha);
        printf("Digite a coluna: ");
        scanf("%d", &coluna);

    }while(jogoDaVelha[linha][coluna] != ' ' || linha < 0 || linha > 2 || coluna < 0 || coluna > 2);

    if(player == 0){
        jogoDaVelha[linha][coluna] = 'X';
        player++;
    }
    else{
        jogoDaVelha[linha][coluna] = 'O';
        player = 0;
    }
};

void checarVitoria(){
    if(jogoDaVelha[0][0] == 'X' && jogoDaVelha[0][1] == 'X' && jogoDaVelha[0][2] == 'X' ||
       jogoDaVelha[1][0] == 'X' && jogoDaVelha[1][1] == 'X' && jogoDaVelha[1][2] == 'X' ||
       jogoDaVelha[2][0] == 'X' && jogoDaVelha[2][1] == 'X' && jogoDaVelha[2][2] == 'X'){
        printf("\tPlayer %s venceu!\n", jogador1);
        vitoria++;
       }
    if(jogoDaVelha[0][0] == 'O' && jogoDaVelha[0][1] == 'O' && jogoDaVelha[0][2] == 'O' ||
       jogoDaVelha[1][0] == 'O' && jogoDaVelha[1][1] == 'O' && jogoDaVelha[1][2] == 'O' ||
       jogoDaVelha[2][0] == 'O' && jogoDaVelha[2][1] == 'O' && jogoDaVelha[2][2] == 'O'){
        printf("\tPlayer %s venceu!\n", jogador2);
        vitoria++;
       }


    if(jogoDaVelha[0][0] == 'X' && jogoDaVelha[1][0] == 'X' && jogoDaVelha[2][0] == 'X' ||
       jogoDaVelha[0][1] == 'X' && jogoDaVelha[1][1] == 'X' && jogoDaVelha[2][1] == 'X' ||
       jogoDaVelha[0][2] == 'X' && jogoDaVelha[1][2] == 'X' && jogoDaVelha[2][2] == 'X'){
        printf("\tPlayer %s venceu!\n", jogador1);
        vitoria++;
       }
    if(jogoDaVelha[0][0] == 'O' && jogoDaVelha[1][0] == 'O' && jogoDaVelha[2][0] == 'O' ||
       jogoDaVelha[0][1] == 'O' && jogoDaVelha[1][1] == 'O' && jogoDaVelha[2][1] == 'O' ||
       jogoDaVelha[0][2] == 'O' && jogoDaVelha[1][2] == 'O' && jogoDaVelha[2][2] == 'O'){
        printf("\tPlayer %s venceu!\n", jogador2);
        vitoria++;
       }


    if(jogoDaVelha[0][0] == 'X' && jogoDaVelha[1][1] == 'X' && jogoDaVelha[2][2] == 'X'){
        printf("\tPlayer %s venceu!\n", jogador1);
        vitoria++;
       }

    if(jogoDaVelha[0][0] == 'O' && jogoDaVelha[1][1] == 'O' && jogoDaVelha[2][2] == 'O'){
        printf("\tPlayer %s venceu!\n", jogador2);
        vitoria++;
       }


    if(jogoDaVelha[0][2] == 'X' && jogoDaVelha[1][1] == 'X' && jogoDaVelha[2][0] == 'X'){
        printf("\tPlayer %s venceu!\n", jogador1);
        vitoria++;
       }
    if(jogoDaVelha[0][2] == 'O' && jogoDaVelha[1][1] == 'O' && jogoDaVelha[2][0] == 'O'){
        printf("\tPlayer %s venceu!\n", jogador2);
        vitoria++;
       }
};

int main(){
    setlocale(LC_ALL, "Portuguese");
    system("color 75");

    apresentar();
    tab();

    switch(op){
        case 1:
            receberUsuarios();
            do{
                printarTab();
                jogar();
                checarVitoria();
            }while(vitoria == 0);
            main();
            break;
        case 2:
            break;
        case 3:
            break;
    }
}
